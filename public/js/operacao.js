var initOperacoes=function(){Modernizr.touch||$("#opDate").attr("type","text").datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0,afterShow:function(a,b,c){b.dpDiv.css("width","400px"),$(".ui-datepicker").css("width",$("#opDate").width())}}),$.getJSON("https://surerussolutions.com/divegold-webservice/operation",function(a){$("#opTable").dynatable({writers:{date:function(a){return a.parsedDate=a.date,moment(a.date).format("DD/MM/YYYY")},status:function(a){return a.parsedStatus=a.status,a.status?"Confirmada":"Em aberto"},"delete":function(a){return"<button data-id='"+a.id+"' class='btn btn-danger btn-xs btn-raised btnRemoveOp'><span class='mdi-content-clear'></span></button>"}},inputs:{recordCountPageBoundTemplate:"{pageLowerBound} a {pageUpperBound} de",recordCountPageUnboundedTemplate:"{recordsShown} de",recordCountTotalTemplate:"{recordsQueryCount} {collectionName}",recordCountFilteredTemplate:" (filtrado {recordsTotal} operações)",recordCountTextTemplate:"{text} {pageTemplate} {totalTemplate} {filteredTemplate}",perPageText:"Mostrar: ",processingText:"Processando...",paginationPrev:"Anterior",paginationNext:"Próximo",recordCountText:"Exibindo "},features:{paginate:!0},dataset:{records:a.operations}})}).fail(function(){}),$(".tableContainer").on("click","button",function(a){deleteOp(a.currentTarget)}),$("#btnAdicionarOp").click(function(){var a,b,c={};a=$("#opDate").val(),b=a.split("/"),a=b[1]+"-"+b[0]+"-"+b[2],c.date=new Date(a).getTime(),c.desc=$("#opName").val(),addOperation(c),$("#opDate").val(""),$("#opName").val("")})},deleteOp=function(a){var b=confirm("Tem certeza que deseja remover esta operação?");if(b===!0){var c={};c.id=$(a).data("id"),c.type={},c.type.id=1,c.type.desc="Livre - Mina da Passagem",c.desc="TESTE-DELETE",c.date=(new Date).getTime(),c.status=0,$.ajax({cache:!1,url:"//surerussolutions.com/divegold-webservice/operation/delete",type:"POST",dataType:"json",data:JSON.stringify(c),success:function(a){sweetAlert("Operação removida com sucesso!","","success")},error:function(a){console.log(a),configTimeout("Ocorreu um erro ao tentar excluir esta operação.")}})}else e.preventDefault()},addOperation=function(a){return a?void saveOperations(a):void configTimeout("Os campos de data e nome da operação são obrigatórios.")},saveOperations=function(a){var b=$("#opTable").data("dynatable"),c=(b.settings.dataset.originalRecords,{});c.id=0,c.type={},c.type.id=1,c.type.desc="Livre - Mina da Passagem",c.desc=a.desc,c.date=a.date,c.status=0,console.log(JSON.stringify(c)),$.ajax({cache:!1,url:"//surerussolutions.com/divegold-webservice/operation/add",type:"POST",dataType:"json",data:JSON.stringify(c),success:function(a){console.log(a),b.settings.dataset.originalRecords.push(a),b.process(),sweetAlert("Operações salvas com sucesso!","","success")},error:function(){$.unblockUI(),configTimeout("Ocorreu um erro ao enviar ao salvar as operações.")}})};$(document).ready(function(){-1!==window.location.href.indexOf("/operacoes")&&initOperacoes()});
//# sourceMappingURL=operacao.js.map