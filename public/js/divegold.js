$(document).ready(function(){}),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(a.length<o.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),function(a,b){return"?"!=a?i[a]?p(b):a:void 0}),D=C.join(""),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join("")}),B.one("unmask",function(){B.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!B.prop("readonly")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a)},10)}}).on("blur.mask",v).on("keydown.mask",w).on("keypress.mask",x).on("input.mask paste.mask",function(){B.prop("readonly")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off("input.mask").on("input.mask",u),A()})}})}),$(function(){$("#login-form-link").click(function(a){$("#login-form").delay(100).fadeIn(100),$("#register-form").fadeOut(100),$("#register-form-link").removeClass("active"),$(this).addClass("active"),a.preventDefault()}),$("#register-form-link").click(function(a){$("#register-form").delay(100).fadeIn(100),$("#login-form").fadeOut(100),$("#login-form-link").removeClass("active"),$(this).addClass("active"),a.preventDefault()})});var initOperacoes=function(){Modernizr.touch||$("#opDate").attr("type","text").datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0,afterShow:function(a,b,c){b.dpDiv.css("width","400px"),$(".ui-datepicker").css("width",$("#opDate").width())}}),$.getJSON("https://surerussolutions.com/divegold-webservice/operation",function(a){$("#opTable").dynatable({writers:{date:function(a){return a.parsedDate=a.date,moment(a.date).format("DD/MM/YYYY")},status:function(a){return a.parsedStatus=a.status,a.status?"Confirmada":"Em aberto"},"delete":function(a){return"<button class='btn btn-danger btn-xs btn-raised btnRemoveOp'><span class='mdi-content-clear'></span></button>"}},inputs:{recordCountPageBoundTemplate:"{pageLowerBound} a {pageUpperBound} de",recordCountPageUnboundedTemplate:"{recordsShown} de",recordCountTotalTemplate:"{recordsQueryCount} {collectionName}",recordCountFilteredTemplate:" (filtrado {recordsTotal} operações)",recordCountTextTemplate:"{text} {pageTemplate} {totalTemplate} {filteredTemplate}",perPageText:"Mostrar: ",processingText:"Processando...",paginationPrev:"Anterior",paginationNext:"Próximo",recordCountText:"Exibindo "},features:{paginate:!0},dataset:{records:a.operations}})}).fail(function(){}),$("#btnAdicionarOp").click(function(){var a,b,c={};a=$("#opDate").val(),b=a.split("/"),a=b[1]+"-"+b[0]+"-"+b[2],c.date=new Date(a).getTime(),c.desc=$("#opName").val(),addOperation(c),$("#opDate").val(""),$("#opName").val("")})},bindDeleteButton=function(a){a.last().click(function(a){a.preventDefault();var b=confirm("Tem certeza que deseja remover esta operação?");b===!0?$(this).parents(".lineOpItem").slideUp(300,function(){$(this).remove()}):a.preventDefault()})},addOperation=function(a){return a?void saveOperations(a):void configTimeout("Os campos de data e nome da operação são obrigatórios.")},saveOperations=function(a){var b=$("#opTable").data("dynatable"),c=(b.settings.dataset.originalRecords,{});c.id=0,c.type={},c.type.id=1,c.type.desc="Livre - Mina da Passagem",c.desc=a.desc,c.date=a.date,c.status=0,console.log(JSON.stringify(c)),$.ajax({cache:!1,url:"//surerussolutions.com/divegold-webservice/operation/add",type:"POST",dataType:"json",data:JSON.stringify(c),success:function(a){$.unblockUI(),console.log(a),b.settings.dataset.originalRecords.push(a),b.process(),sweetAlert("Operações salvas com sucesso!","","success")},error:function(){configTimeout("Ocorreu um erro ao enviar ao salvar as operações.")}})};$(document).ready(function(){-1!==window.location.href.indexOf("/operacoes")&&initOperacoes()});var getOperations=function(){$.blockUI({message:"Carregando lista de operações...",css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}}),$.getJSON("//surerussolutions.com/divegold-webservice/rest/operation/",function(a){var b="<option value='{{id}}'>{{date}} - {{desc}}</option>",c=Handlebars.compile(b);$.each(a.operations,function(){var a={},b=new Date(this.date);a.id=this.id,a.desc=this.desc,a.date=b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear();var d=c(a);$(".comboOperacoes").append(d)}),$.unblockUI()}).fail(function(){configTimeout("Ocorreu um erro ao buscar a lista de operações.")})},generate=function(){},initPlanilha=function(){var a=this;$("#btnGenerate").click(function(){a.generate()})};$(document).ready(function(){-1!==window.location.href.indexOf("/planilha")&&(initPlanilha(),getOperations())});var getAvailableDates=function(){$.getJSON("//surerussolutions.com/divegold-webservice/operation/status=0",function(a){var b=[];$.each(a.operations,function(){var a=new Date(this.date);b.push(a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear())}),datelist=b,$("#datepicker").datepicker("refresh"),$.unblockUI()}).fail(function(){configTimeout("Ocorreu um erro ao buscar as datas de mergulho.")})},clearUserInfo=function(){$("#userName").val(""),$("#cep").val(""),$("#rua").val(""),$("#numero").val(""),$("#comp").val(""),$("#bairro").val(),$("#cidade").val(""),$("#uf").val(""),$("#tel").val(""),$("#cel").val(""),$("#email").val(""),$("#btnNivelMergulho").text("Selecione")},enabledAddBtn=function(){"Selecione"!==$("#btnCilindro").text()&&"Selecione"!==$("#btnGases").text()&&"Selecione"!==$("#btnDatas").text()?$(".btnAddTanque").removeAttr("disabled",""):$(".btnAddTanque").attr("disabled","")},getLongDate=function(a){var b;if(a){var c,d=a.split("/");c=d[1]+"-"+d[0]+"-"+d[2],b=new Date(c).getTime()}return b},getDiveDates=function(){$("#dataMergulho").datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",beforeShowDay:function(a){var b="";return b+=a.getDate()+"-",b+=a.getMonth()+1+"-",b+=a.getFullYear(),$.inArray(b,datelist)>=0?[!0,""]:[!1,""]}}),$("#dataMergulho").click(function(){getAvailableDates()})},applyPhoneMask=function(a){var b=["SP","RJ","ES","AM","PA","MA","RR","AP"];$(".cel").mask(a.val()&&b.indexOf(a.val())>-1?"(99) 99999-9999":"(99) 9999-9999")},applyMasks=function(){$("#cpf").mask("999.999.999-99",{placeholder:" ",clearOnLostFocus:!1}),$("#cnpj").mask("99.999.999/9999-99",{placeholder:" ",clearOnLostFocus:!1}),$("#cep").mask("99.999-999",{placeholder:" ",clearOnLostFocus:!1}),$("#uf").mask("aa",{placeholder:" ",clearOnLostFocus:!1}),$(".cel").mask("(99) 9999-9999",{placeholder:" ",clearOnLostFocus:!1}),$(".equipment").mask("9?9",{placeholder:" ",clearOnLostFocus:!1})},configTimeout=function(a){console.log(a),$.unblockUI(),sweetAlert("Ops...",a,"error")},populateAparts=function(){var a="//surerussolutions.com/divegold-webservice/serrinha/apartype",b="<li><a href='#' value={{type}}>{{type}}</a></li>";apItemTemplate=Handlebars.compile(b),$.getJSON(a,function(a){$.each(a.innApartTypes,function(){var a=apItemTemplate(this);$("#comboTipoAp").append(a)}),$("#comboTipoAp").find("li").on("click",function(a){$("#btnTipoAp").text($(this).text()),("Duplo Casal"===$(this).text()||"Duplo Solteiro"===$(this).text())&&($(".acomp1").slideDown("slow"),$(".acomp2").slideUp("slow"),$(".acomp3").slideUp("slow")),("Triplo Casal"===$(this).text()||"Triplo Solteiro"===$(this).text())&&($(".acomp1").slideDown("slow"),$(".acomp2").slideDown("slow"),$(".acomp3").slideUp("slow")),("Quádruplo Casal"===$(this).text()||"Quádruplo Solteiro"===$(this).text())&&($(".acomp1").slideDown("slow"),$(".acomp2").slideDown("slow"),$(".acomp3").slideDown("slow")),"Solteiro"===$(this).text()&&($(".acomp1").slideUp("slow"),$(".acomp2").slideUp("slow"),$(".acomp3").slideUp("slow")),$("#btnTipoAp").attr("typeId",$(this).find("a").attr("value")),a.preventDefault()}),getDiveDates()}).fail(function(){getDiveDates(),configTimeout("Não foi possível localizar os tipos de acomodacoes.")})},populateGases=function(){var a="//surerussolutions.com/divegold-webservice/gastype",b="<li><a href='#' value={{id}}>{{type}}</a></li>";gasItemTemplate=Handlebars.compile(b),$.getJSON(a,function(a){$.each(a.gasTypes,function(){var a=gasItemTemplate(this);$("#comboGases").append(a)}),$("#comboGases").find("li").on("click",function(a){a.preventDefault(),$("#btnGases").text($(this).text()),$("#btnGases").attr("typeId",$(this).find("a").attr("value")),enabledAddBtn()}),populateAparts()}).fail(function(){configTimeout("Não foi possível localizar os tipos de gases."),populateAparts()})},populateTanks=function(){var a="//surerussolutions.com/divegold-webservice/tanktype",b="<li><a href='#' value={{id}}>{{type}}</a></li>";tankItemTemplate=Handlebars.compile(b),$.getJSON(a,function(a){$.each(a.tankTypes,function(){var a=tankItemTemplate(this);$("#comboCilindro").append(a)}),$("#comboCilindro").find("li").on("click",function(a){a.preventDefault(),$("#btnCilindro").text($(this).text()),$("#btnCilindro").attr("typeId",$(this).find("a").attr("value")),enabledAddBtn()}),populateGases()}).fail(function(){configTimeout("Não foi possível localizar os tipos de cilindros."),populateGases()})},populateCombos=function(){$.blockUI({message:"Carregando informações de cadastro",css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}});var a="//surerussolutions.com/divegold-webservice/divertype",b="<li><a href='#' value={{id}}>{{desc}}</a></li>";dataMergulhoTemplate=Handlebars.compile(b),$.getJSON(a,function(a){$.each(a.diverTypes,function(){var a=dataMergulhoTemplate(this);$("#comboNivelMergulho").append(a)}),$("#comboNivelMergulho").find("li").on("click",function(a){a.preventDefault(),$("#btnNivelMergulho").text($(this).text())}),populateTanks()}).fail(function(){configTimeout("Não foi possível localizar os niveis de mergulhador."),populateTanks()})},beforePost=function(){$("#formReserva").submit(function(a){if(a.preventDefault(),!$("#cpf").val().replace(".","").replace("-","").replace(".","").trim()&&!$("#cnpj").val().replace(".","").replace("-","").replace("/","").replace("_","").replace(".","").trim())return void configTimeout("Favor informar pelo menos o CPF ou CNPJ");if(!$("#userName").val())return void configTimeout("O nome é obrigatório");if(!$("#cep").val()||10!==$("#cep").val().length)return void configTimeout("O CEP é obrigatório");if(!$("#cel").val())return void configTimeout("Favor fornecer o número do telefone celular para contato");if(!$("#email").val())return void configTimeout("O campo de email é obrigatório");if(-1===$("#email").val().indexOf("@"))return void configTimeout("O email fornecido é inválido");if("Selecione"===$("#btnNivelMergulho").text())return void configTimeout("Favor escolher o nível do mergulhador");if(0===$(".datasReserva input").length)return void configTimeout("Favor escolher pelo menos uma data de mergulho");if(0===$(".gasTypesRowSet").length)return void configTimeout("Favor escolher pelo menos um tanque e um gas por data");if($("#checkPousada").is(":checked")){if(!$("#dataEntrada").val()||!$("#dataSaida").val())return void configTimeout("As datas de entrada e saída da pousada são obrigatórias");if("Selecione"===$("#btnTipoAp").text())return void configTimeout("O tipo da acomodação é obrigatório");if(!$("#nomeReserva").val())return void configTimeout("O nome do responsável pela reserva é obrigatório");if($("#acomp1").is(":visible")&&!$("#acomp1").val()||$("#acomp2").is(":visible")&&!$("#acomp2").val()||$("#acomp3").is(":visible")&&!$("#acomp3").val())return void configTimeout("Os nomes de todos os acompanhantes são obrigatórios")}swal({title:"Confirmar reserva?",text:"Ao clicar em sim, sua reserva será processada.",type:"warning",showCancelButton:!0,confirmButtonColor:"rgb(44, 161, 44)",confirmButtonText:"Sim!"},function(){sendPostRequest(a)})})},sendPostRequest=function(a){var b={},c=this;if($.blockUI({message:"Processando sua reserva...",css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}}),b.userInfo={},b.userInfo.name=$("#userName").val(),b.userInfo.cpf=$("#cpf").val().replace(".","").replace("-","").replace(".",""),b.userInfo.cnpj=$("#cnpj").val().replace(".","").replace("-","").replace("/","").replace("_","").replace(".",""),b.userInfo.cep=$("#cep").val().replace(".","").replace("-","").replace(" ",""),b.userInfo.address=$("#rua").val(),b.userInfo.city=$("#cidade").val(),b.userInfo.uf=$("#uf").val(),b.userInfo.number=$("#numero").val(),b.userInfo.comp=$("#comp").val(),b.userInfo.region=$("#bairro").val(),b.userInfo.tel=$("#tel").val().replace("-","").replace(" ","").replace("(","").replace(")",""),b.userInfo.cel=$("#cel").val().replace("-","").replace(" ","").replace("(","").replace(")",""),b.userInfo.email=$("#email").val(),b.userInfo.diverType="Selecione"!==$("#btnNivelMergulho").text()?$("#btnNivelMergulho").text():"",b.diveDates=[],b.tankInfo=[],b.reservationComments=$("#obsReserva").val(),b.gearInfo={},b.innInfo={},$.each($(".datasReserva input"),function(a,c){var d={};d.date=getLongDate($(this).val()),b.diveDates.push(d)}),$.each($(".gasTypesRowSet"),function(a,c){var d={};d.opId="1",$.each($(this).find("input"),function(a,b){$(this).hasClass("dateSet")?d[$(this).attr("name")]=getLongDate($(this).val()):d[$(this).attr("name")]=$(this).attr("typeId")}),b.tankInfo.push(d)}),b.gearInfo.needed=$("#checkEquipamentos").is(":checked"),b.gearInfo.needed&&$.each($(".equipment"),function(a,c){$(this).val()&&(b.gearInfo[$(this).attr("name")]=$(this).val())}),b.innInfo.needed=$("#checkPousada").is(":checked"),b.innInfo.needed){if(b.innInfo.dateIn=getLongDate($("#dataEntrada").val()),b.innInfo.dateOut=getLongDate($("#dataSaida").val()),b.innInfo.apType="Selecione"!==$("#btnTipoAp").text()?$("#btnTipoAp").text():"",b.innInfo.reservationName=$("#nomeReserva").val(),b.innInfo.guests=[],$("#acomp1").val()&&$("#acomp1").is(":visible")){var d={};d.name=$("#acomp1").val(),d.diver=$("#firstDiverYes").is(":checked"),b.innInfo.guests.push(d),$("#acomp2").val()&&$("#acomp2").is(":visible")&&(d.name=$("#acomp2").val(),d.diver=$("#secondDiverYes").is(":checked"),b.innInfo.guests.push(d),$("#acomp3").val()&&$("#acomp3").is(":visible")&&(d.name=$("#acomp3").val(),d.diver=$("#thirdDiverYes").is(":checked"),b.innInfo.guests.push(d)))}b.innInfo.comments=$("#observacoes").val()}console.log(JSON.stringify(b)),$.ajax({cache:!1,url:"//surerussolutions.com/divegold-webservice/reservation/add",type:"POST",dataType:"json",data:JSON.stringify(b),context:c,success:function(a){$.unblockUI(),sweetAlert("Solicitação de reserva realizada com sucesso!","Você receberá um email com o resumo da sua solicitação. Lembramos que sua reserva ainda não está confirmada e está sujeita à disponibilidade. Você receberá outro email quando sua reserva forma confirmada pela DIVEGOLD","success"),$(".center").html("<div class='text-center'><img src='https://s3-sa-east-1.amazonaws.com/felipemedia/divegold_logo.png' width='35' height='35' alt='DiveGold Logo'>Reserva efetuada com sucesso!</div>")},error:function(){configTimeout("Ocorreu um erro ao enviar a reserva.")}})},initEvents=function(){function a(a){if("dataSaida"==a.id&&""!==$("#dataEntrada").val()){var b=$("#dataEntrada").val(),c=b.split("/");b=c[1]+"-"+c[0]+"-"+c[2];var d=new Date(b);return d.setDate(d.getDate()+1),{minDate:d}}return{minDate:0}}function b(a){if(a.userInfo){$("#userName").val(a.userInfo.name),$("#cep").val(a.userInfo.cep),$("#rua").val(a.userInfo.address),$("#numero").val(a.userInfo.number),$("#comp").val(a.userInfo.comp),$("#bairro").val(a.userInfo.region),$("#cidade").val(a.userInfo.city),$("#uf").val(a.userInfo.uf),$("#tel").val(a.userInfo.tel),$("#cel").val(a.userInfo.cel),$("#email").val(a.userInfo.email),$("#btnNivelMergulho").text(a.userInfo.diverType.desc),$("#cep").mask("99.999-999",{placeholder:" ",clearOnLostFocus:!1}),$("#uf").mask("aa",{placeholder:" ",clearOnLostFocus:!1});var b=["SP","RJ","ES","AM","PA","MA","RR","AP"];$("#uf").val()&&b.indexOf($("#uf").val())>-1?$(".cel").mask("(99) 99999-9999",{clearOnLostFocus:!1}):$(".cel").mask("(99) 9999-9999",{clearOnLostFocus:!1})}}var c=$("#checkEquipamentos"),d=$("#checkPousada"),e=$(".btnAddDate"),f=$("#dataMergulho"),g=$("#dataEntrada"),h=$("#dataSaida"),i=($("#comboNivelMergulho"),$("#btnNivelMergulho"),$("#comboTipoAp"),$("#btnTipoAp"),$("#comboDatas")),j=$("#comboDatasFim"),k=$("#btnDatas"),l=$("#btnDatasFim"),m=$("#equipamentos"),n=$("#pousada"),o=$("#cep"),p=$(".btnAddTanque"),q=($("btnCilindro"),$("btnGases"),$(".btnRemoveDate"),this);applyMasks(),$("#uf").blur(function(){applyPhoneMask($(this))}),$("#cpfRadio").click(function(a){if("true"===$("#firstAccess").text())$("#cpf").removeAttr("disabled",""),$("#cnpj").attr("disabled",""),$("#cnpj").val(""),$("#cpf").focus(),$("#firstAccess").text("false");else{var b=confirm("Tem certeza que deseja alterar o tipo do cadastro?");b===!0?(clearUserInfo(),$("#cpf").removeAttr("disabled",""),$("#cnpj").attr("disabled",""),$("#cnpj").val(""),$("#cpf").focus()):a.preventDefault()}}),$("#cnpjRadio").click(function(a){var b=confirm("Tem certeza que deseja alterar o tipo do cadastro?");b===!0?(clearUserInfo(),$("#cnpj").removeAttr("disabled",""),$("#cpf").attr("disabled",""),$("#cpf").val(""),$("#cnpj").focus()):a.preventDefault()}),$("#cpfRadio").click(),e.click(function(a){if(-1===$("#dataMergulho").val().indexOf("/"))return void configTimeout("Data de mergulho inválida");var b,c,d="<div class='form-group row'><label class='col-md-1 col-xs-2 control-label'></label><div class='col-md-3 col-xs-6'><input id='dataMergulho' type='text' name='regular' class='form-control' value='{{date}}' disabled></div><div class='col-md-1 col-xs-1 btnRemoveDate'><button type='button' class='btn btn-danger btn-raised btn-xs'><span class='glyphicon glyphicon-remove-sign'></span> Remover</button></div></div>",e="<li><a href='#' value={{date}}>{{date}}</a></li>",g=Handlebars.compile(d),h=Handlebars.compile(e),m=f.val();if(m&&""!==m){f.val(""),b={date:m},c=g(b);var n=h(b);n&&(i.find("[value='"+m+"']").length||($(".datasReserva").append(c),i.append(n),j.append(n),i.find("a").on("click",function(a){a.preventDefault(),k.text($(this).text()),enabledAddBtn()}),j.find("a").on("click",function(a){a.preventDefault(),l.text($(this).text())}))),c&&$(".btnRemoveDate").last().click(function(a){a.preventDefault(),$(this).parent().slideUp(300,function(){$(this).remove()}),$(".dateSet[value='"+m+"']").parents(".gasTypesRowSet").slideUp(300,function(){$(this).remove()}),i.find("[value='"+m+"']").parent().remove(),j.find("[value='"+m+"']").parent().remove(),k.text("Selecione"),l.text("Selecione"),$("#btnCilindro").text("Selecione"),$("#btnGases").text("Selecione"),i.find("[value='"+m+"']").length||p.attr("disabled","")})}}),p.click(function(a){var b,c="<div class='form-group row gasTypesRowSet well'><div class='row bottom'><label class='col-md-2 col-xs-12 control-label'>Data inicial de uso</label><div class='col-md-2 col-xs-11'><input type='text' name='diveDateIn' class='form-control dateSet' value='{{date}}' disabled></div><label class='col-md-2  col-xs-12 control-label'>Cilindro</label><div class='col-md-2 col-xs-11'><input type='text' name='tankType' typeId='{{cilindroId}}' class='form-control' value='{{cilindro}}' disabled></div></div><div class='row bottom'><label class='col-md-2 col-xs-12 control-label'>Data final de uso</label><div class='col-md-2 col-xs-11'><input type='text' name='diveDateOut' class='form-control dateSet' value='{{dateFim}}' disabled></div><label class='col-md-2 col-xs-12 control-label'>Gases</label><div class='col-md-2  col-xs-11'><input type='text' name='gasType' class='form-control' typeId='{{gasId}}' value='{{gas}}' disabled></div><div class='col-md-1 col-xs-12 divRemoveTank'><button type='button' class='btn btn-danger btn-raised btnRemoveTanque btn-xs btn-fab mdi-navigation-close'></button></div></div></div>",d=Handlebars.compile(c),e=$("#btnDatas").text(),f=$("#btnDatasFim").text(),g=$("#btnCilindro").text(),h=$("#btnCilindro").attr("typeId"),i=$("#btnGases").text(),j=$("#btnGases").attr("typeId");"Selecione"===f&&(f=""),b=d({date:e,dateFim:f,cilindro:g,gas:i,cilindroId:h,gasId:j}),$(".gasTypesRowDates").append(b),$(".btnRemoveTanque").last().click(function(a){a.preventDefault(),$(this).parents(".gasTypesRowSet").slideUp(300,function(){$(this).remove()})}),k.text("Selecione"),l.text("Selecione"),$("#btnCilindro").text("Selecione"),$("#btnGases").text("Selecione"),p.attr("disabled","")}),getAvailableDates(),g.datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0}),h.datepicker({dateFormat:"dd/mm/yy",dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesMin:["D","S","T","Q","Q","S","S","D"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],nextText:"Próximo",prevText:"Anterior",minDate:0,beforeShow:a}),$.each($(".datasReserva input"),function(a,b){diveDates.push($(this).val())}),m.hide(),n.hide(),c.change(function(a){a.preventDefault(),$(this).prop("checked")?m.slideDown("slow"):($.each($(".equipment"),function(a,b){$(this).val("")}),m.slideUp("slow"))}),d.change(function(a){a.preventDefault(),$(this).prop("checked")?n.slideDown("slow"):n.slideUp("slow")}),o.blur(function(){var a=$(this).val().replace(".","").replace("-","");if(a){var b="//cep.correiocontrol.com.br/"+a+".json";$.getJSON(b,function(a){$("#rua").val(a.logradouro),$("#bairro").val(a.bairro),$("#cidade").val(a.localidade),$("#uf").val(a.uf),q.applyPhoneMask($("#uf"))}).fail(function(){console.log("CEP inexistente")})}}),$("#cpf").blur(function(){var a=$(this).val().replace(".","").replace("-","").replace(".","");if(a){var c="//surerussolutions.com/divegold-webservice/client/type=0&value="+a+"/";$.getJSON(c,function(a){b(a)}).fail(function(){console.log("CPF sem dados cadastrais")})}}),$("#cnpj").blur(function(){var a=$(this).val().replace(".","").replace("-","").replace("/","").replace("_","").replace(".","");if(a){var c="//surerussolutions.com/divegold-webservice/client/type=1&value="+a+"/";$.getJSON(c,function(a){b(a)}).fail(function(){console.log("CNPJ sem dados cadastrais")})}}),$('[data-toggle="tooltip"]').tooltip(),populateCombos(),beforePost()};$(document).ready(function(){if(-1!==window.location.href.indexOf("/reserva")){initEvents()}});
//# sourceMappingURL=divegold.js.map